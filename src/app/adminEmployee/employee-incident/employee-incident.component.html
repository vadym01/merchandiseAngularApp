<app-title [description]="'Инциденты'"></app-title>

<div class="form-container" *ngIf="showIncidentForm">
  <form (ngSubmit)="onSubmit()" #f="ngForm">
    <div class="main-info-container">
      <div class="form-group">
        <label for="incidentDescription">Описание</label>
        <input
          type="text"
          id="incidentDescription"
          class="form-control"
          [ngModel]="incident?.incidentDescription"
          (ngModelChange)="(null)"
          name="incidentDescription"
        />
      </div>
      <div class="form-group">
        <label for="date">Дата инцыдента</label>
        <input
          type="date"
          id="date"
          class="form-control"
          [ngModel]="incident?.date"
          (ngModelChange)="(null)"
          name="date"
        />
      </div>
      <div>
        <div class="form-group">
          <label for="employeeId">Id техники</label>
          <input
            type="number"
            id="employeeId"
            class="form-control"
            [ngModel]="employee?.id"
            (ngModelChange)="(null)"
            name="employeeId"
            disabled
          />
        </div>
        <div class="form-group">
          <label for="firstName">Имя</label>
          <input
            type="text"
            id="firstName"
            class="form-control"
            [ngModel]="employee?.firstName"
            (ngModelChange)="(null)"
            name="firstName"
            disabled
          />
        </div>
      </div>
    </div>
    <div class="submit-form-group">
      <div class="submit-container">
        <button type="submit" id="submit-button"></button>
        <p>Сохранить</p>
      </div>
    </div>
  </form>
</div>

<app-employee-table
  [showButtons]="true"
  [employees]="employees"
  (employeeInfoIndex)="onSetEmployeeInfoClickHandler($event)"
></app-employee-table>

<table class="styled-table">
  <thead>
    <tr>
      <th>Id</th>
      <th>Описание</th>
      <th>Дата инцидента</th>
      <th>Id работника</th>
      <th>Имя</th>
      <th>Действия</th>
    </tr>
  </thead>
  <tbody class="tbody-class">
    <tr *ngFor="let incident of incidents; let indexOfElement = index">
      <td>
        {{ incident.id }}
      </td>
      <td>
        {{ incident.incidentDescription }}
      </td>
      <td>
        {{ incident.date }}
      </td>
      <td>
        {{ incident.employee.id }}
      </td>
      <td>{{ incident.employee.firstName }}</td>

      <td>
        <button
          (click)="onUpdateClickIncidentHandler(indexOfElement)"
          class="button-action"
        >
          <i class="fa fa-pencil" aria-hidden="true"></i>
        </button>
        <button
          (click)="deleteIncidentById(incident.id, indexOfElement)"
          class="button-action"
        >
          <i class="fa fa-trash" aria-hidden="true"></i>
        </button>
      </td>
    </tr>
  </tbody>
</table>
